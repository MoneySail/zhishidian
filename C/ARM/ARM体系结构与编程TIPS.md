# ARM处理器的模式 #
　　用户模式 => 正常程序执行的模式  
　　快速中断模式 => 用于高速数据传输和通道处理  
　　外部中断模式 => 用于通常的中断处理  
　　特权模式 => 供操作系统使用的一种保护模式  
　　数据访问终止模式 => 用于虚拟存储及存储保护  
　　未定义指令终止模式 => 用于支持通过软件方针硬件的协处理器  
　　系统模式 => 用于运行特权等级的操作系统任务  

　　TIPS => 1.除用户模式之外的6种处理器模式成为特权模式  
    　　　　2.处理器模式可以通过软件控制进行切换，也可以通过外部中断或异常处理  
    　　　　　过程进行切换。
    　　　　3.当应用程序发生异常中断时候，处理器进入相应的异常处理模式。在每一种  
    　　　　　异常模式的处理中都有一组寄存器，提供相应的异常处理程序使用，这样就  
    　　　　　可以保证在进入异常模式时候，用户模式下的寄存器(保存程序运行状态)不  
    　　　　　被破坏。

# ARM寄存器介绍 #
　　31个通用寄存器，包括程序计数器PC在内，这些寄存器都是32位的寄存器。  
　　6个状态寄存器，这些寄存器都是32位的寄存器，但目前就用了12位。  

## 通用寄存器分类 ##
　　未备份寄存器 包括RO~R7
　　备份寄存器 R8~R14
    程序计数器PC R15

# ARM指令的分类 #

　　ARM指令集可以分为跳转指令，数据处理指令，程序状态寄存器指令(PSR)传输指令，  
Load/Store指令，协处理器指令，异常中断指令6类。

# ARM指令集介绍 #
　　跳转指令主要有四种：
　　B => 跳转指令
　　BL => 待返回的跳转指令
　　BLX => 带返回和状态切换的跳转指令
　　BX => 带状态切换的跳转指令

　　数据处理指令主要分为三种：
　　MOV => 数据传送指令  
　　MVN => 数据求反传送指令  
　　CMP => 比较指令  
　　CMN => 基于相反数的比较指令  
　　TST => 位测试指令  
　　TEQ => 相等测试指令  
　　ADD => 加法指令  
　　SUB => 减法指令  
　　RSB => 逆向减法指令  
　　ADC => 带位加法指令  
　　SBC => 带位减法指令  
　　RSC => 带位逆向减法指令  
　　AND => 逻辑与操作指令  
    BIC => 位清除指令  
　　EOR => 逻辑异或操作指令  
　　ORR => 逻辑或操作指令  

# 嵌入式应用程序基本知识 #

## BASIC ##

　　在ARM体系中，系统复位后将跳转到地址0x00处执行，该处存放的是复位异常  
中断的中断向量。对于嵌入式系统来说，系统复位是后RAM中是不存在代码和数据的  
。因此在系统复位时，地址0x00处应该为ROM，即系统复位后应该首先从ROM中开始  
执行。这时，根据系统在其后运行过程中地址0x00处存储器的类型，有下面两种情况。  
　　1.地址0x00处为ROM  
　　系统复位的时候0x00处总是为ROM, 在地址0x00处存放着复位异常中断向量，根据  
此中断向量，程序跳转到相应的位置进行系统初始化等操作。
　　2.地址0x00处为RAM  
　　对于地址0x00处为RAM的嵌入式系统，未保证复位后系统从地址0x00处开始执行  
在系统复位时候，系统中的存储映射机构将ROM映射到地址x0x00处，然后在程序运行  
的最初几条指令中，系统的存储映射机构进行地址重映射(REMAP), 重新将RAM映射到  
地址0x00处。

## 系统初始化 ##

### 系统运行环境的初始化 ###
　　1.标识整个代码的入口点  
　　程序入口点必须位于印象文件的可执行域当中
　　2.标识异常中断处理向量  
　　3.初始化存储系统  
　　初始化工作(使能IRQ中断及FIQ中断;涉及到RAM的操作)  
　　4.初始化各模式下的数据栈  
　　各处理器都有自己的数据栈，根据应用程序中使用的异常  
　　中断情况，需要设置部分或者全部的数据栈指针。如果系统中  
　　使用了C/C++运行库，用户必须重新实现函数__user_init_heap()  
　　5.初始化一些关键的IO接口  
　　必须在使能IRQ和FIQ之前进行初始化的IO设备，如果没有可能会产生  
　　一些假的中断信号。  
　　6.初始化异常中断需要使用的RAM变量  
　　在异常中断程序中需要使用指向RAM中数据缓冲区的指针，这些指针需要初始化  
　　7.使能异常中断  
　　清除CPSR寄存器的中断禁止位  
　　8.如果需要的话, 切换处理器模式  
　　将处理器模式切换到用户模式  
　　9.如果需要的话，切换处理器状态  

### 应用程序初始化 ###

#### 步骤一 ####
　　将已经初始化的数据搬运到可写的数据区。在嵌入式系统中，已经初始化的数据  
在映像文件运行之前通常保存在ROM中，在程序运行过程中这些数据可能需要被修改。

#### 步骤二 ####
　　在可写存储区简历ZI属性的可写存储区，通常在映像文件之前，也是保存在ROM中  
时，映像文件没有包含ZI属性的数据。在运行映像文件时，在系统中可写的存储区域  
建立ZI属性的数据区。




